'use strict';

var Connection = require('./Connection');
var session = require('express-session');
var MongoStore = require('connect-mongo')(session);

function ConnectMongo() {

    Connection.apply(this, arguments);
    this.options.url = this.options.url || process.env.MONGO_URI || process.env.MONGO_URI;
}

ConnectMongo.prototype = Object.create(Connection.prototype);
ConnectMongo.prototype.constructor = ConnectMongo;
ConnectMongo.parent = Connection;

ConnectMongo.prototype.__open__ = function (resolve, reject) {
    this.store = new MongoStore(this.options);
    resolve(this.store);
};

ConnectMongo.prototype.__close__ = function (resolve, reject) {

    resolve(this.store);
};

module.exports = ConnectMongo;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb25uZWN0aW9ucy9Db25uZWN0TW9uZ28uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDekMsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDekMsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUVuRCxTQUFTLFlBQVksR0FBRzs7QUFFcEIsY0FBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDbEMsUUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQy9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQztDQUc3Qjs7QUFFRCxZQUFZLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzdELFlBQVksQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVksQ0FBQztBQUNsRCxZQUFZLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQzs7QUFFakMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQ3pELFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFDLFdBQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Q0FDdkIsQ0FBQzs7QUFFRixZQUFZLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7O0FBRTFELFdBQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Q0FFdkIsQ0FBQzs7QUFHRixNQUFNLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQyIsImZpbGUiOiJDb25uZWN0TW9uZ28uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29ubmVjdGlvbiA9IHJlcXVpcmUoJy4vQ29ubmVjdGlvbicpO1xudmFyIHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcbnZhciBNb25nb1N0b3JlID0gcmVxdWlyZSgnY29ubmVjdC1tb25nbycpKHNlc3Npb24pO1xuXG5mdW5jdGlvbiBDb25uZWN0TW9uZ28oKSB7XG5cbiAgICBDb25uZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5vcHRpb25zLnVybCA9IHRoaXMub3B0aW9ucy51cmwgfHxcbiAgICAgICAgcHJvY2Vzcy5lbnYuTU9OR09fVVJJIHx8XG4gICAgICAgIHByb2Nlc3MuZW52Lk1PTkdPX1VSSTtcblxuXG59XG5cbkNvbm5lY3RNb25nby5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbm5lY3Rpb24ucHJvdG90eXBlKTtcbkNvbm5lY3RNb25nby5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25uZWN0TW9uZ287XG5Db25uZWN0TW9uZ28ucGFyZW50ID0gQ29ubmVjdGlvbjtcblxuQ29ubmVjdE1vbmdvLnByb3RvdHlwZS5fX29wZW5fXyA9IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB0aGlzLnN0b3JlID0gbmV3IE1vbmdvU3RvcmUodGhpcy5vcHRpb25zKTtcbiAgICByZXNvbHZlKHRoaXMuc3RvcmUpO1xufTtcblxuQ29ubmVjdE1vbmdvLnByb3RvdHlwZS5fX2Nsb3NlX18gPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICByZXNvbHZlKHRoaXMuc3RvcmUpO1xuXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gQ29ubmVjdE1vbmdvOyJdfQ==