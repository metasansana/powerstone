{"version":3,"sources":["../../src/routing/PipesFeature.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;8BAAiB,kBAAkB;;;;wBACf,WAAW;;;;;;;;;IAMzB,YAAY;cAAZ,YAAY;;aAAZ,YAAY;8BAAZ,YAAY;;mCAAZ,YAAY;;;iBAAZ,YAAY;;eAEP,iBAAC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE;;;AAEjC,gBAAI,CAAC,CAAC;;AAEN,gBAAI,OAAO,UAAU,CAAC,KAAK,KAAK,QAAQ,EAAE,OAAO;;AAEjD,kBAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAC7B,OAAO,CAAC,UAAA,GAAG,EAAI;;AAEX,iBAAC,GAAG,gCAAS,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,MAAK,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;;AAEtE,iBAAC,CAAC,KAAK,CAAC,MAAM,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;;AAErC,qBAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,UAAS,GAAG,EAAE,CAAC,EAAE;AAC7B,4BAAI,GAAG,EAAE;AACL,+BAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAChB,mCAAO,GAAG,CAAC,IAAI,EAAE,CAAC;yBACrB;AACD,2BAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACb,4BAAI,EAAE,CAAC;qBACV,CAAC,CAAC;iBAEN,CAAC,CAAC;aACN,CAAC,CAAC;SAEN;;;WA3BC,YAAY;;;qBA+BH,YAAY","file":"PipesFeature.js","sourcesContent":["import Pipe from 'pipes/build/Pipe';\nimport Feature from './Feature';\n\n/**\n * PipesFeature installs middleware for the pipes framework\n * on a route.\n */\nclass PipesFeature extends Feature {\n\n    install(method, path, definition, q) {\n\n        var p;\n\n        if (typeof definition.pipes !== 'object') return;\n\n        Object.keys(definition.pipes).\n        forEach(key => {\n\n            p = new Pipe(definition.pipes[key], this.application.framework.pipes);\n\n            q.enque(method, function(req, res, next) {\n\n                p.run(req[key], function(err, o) {\n                    if (err) {\n                        res.status(409);\n                        return res.send();\n                    }\n                    req[key] = o;\n                    next();\n                });\n\n            });\n        });\n\n    }\n\n}\n\nexport default PipesFeature\n"]}