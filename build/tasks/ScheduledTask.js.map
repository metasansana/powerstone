{"version":3,"sources":["../../src/tasks/ScheduledTask.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;qBAAiB,QAAQ;;;;oBACH,MAAM;;;;;;;;IAOtB,aAAa;cAAb,aAAa;;AAEJ,aAFT,aAAa,CAEH,QAAQ,EAAC;8BAFnB,aAAa;;AAGX,mCAHF,aAAa,6CAGH;AACR,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC5B;;iBALC,aAAa;;eAOZ,aAAC,MAAM,EAAE,EAAE,EAAC;;AAEX,gBAAI,IAAI,GAAG,IAAI,CAAC;AAChB,sBAjBA,OAAO,CAiBK,IAAI,CAAC,QAAQ,EAAE,YAAW;AAClC,sBAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AACzD,oBAAI,CAAC,OAAO,CAAC,MAAM,EAAE,UAAS,GAAG,EAAE,OAAO,EAAC;AACvC,AAAC,uBAAG,GAAG,MAAM,CAAC,sBAAsB,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;iBAC7E,CAAC,CAAC;aACN,EAAE,YAAU;AAAC,uBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aAAC,EAAE,IAAI,CAAC,CAAC;;AAEzC,cAAE,EAAE,CAAC;SACR;;;WAlBC,aAAa;;;qBAqBJ,aAAa","file":"ScheduledTask.js","sourcesContent":["import Task from './Task';\nimport {CronJob} from 'cron';\n\n/**\n * ScheduledTask runs a task at a specific time period.\n *\n * Uses node-cron behind the scenes to support a crontab like syntax.\n */\nclass ScheduledTask extends Task {\n\n    constructor(schedule){\n        super();\n        this.schedule = schedule;\n    }\n\n    run(report, cb){\n\n        var self = this;\n        new CronJob(this.schedule, function() {\n            report.taskStarted(self.taskID || self.constructor.name);\n            self.runTask(report, function(err, message){\n                (err)? report.taskCompletedWithError(err) : report.taskCompleted(message);\n            });\n        }, function(){console.log('me');}, true);\n\n        cb();\n    }\n}\n\nexport default ScheduledTask\n"]}