{"version":3,"sources":["../../../src/tasks/test/ScheduledTask_test.js"],"names":[],"mappings":";;;;;;;;;;;;8BAA0B,kBAAkB;;;;oBAC3B,MAAM;;;;AAEvB,IAAI,MAAM,CAAC;AACX,IAAI,IAAI,CAAC;;IAEH,QAAQ;cAAR,QAAQ;;aAAR,QAAQ;8BAAR,QAAQ;;mCAAR,QAAQ;;;iBAAR,QAAQ;;eAEH,iBAAC,MAAM,EAAE,EAAE,EAAC;;AAEf,sBAAU,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SAExB;;;WANC,QAAQ;;;IAUR,SAAS;cAAT,SAAS;;aAAT,SAAS;8BAAT,SAAS;;mCAAT,SAAS;;;iBAAT,SAAS;;eAEJ,iBAAC,MAAM,EAAE,EAAE,EAAC;;AAEf,sBAAU,CAAC,YAAW;AAClB,kBAAE,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;aAC/B,EAAE,IAAI,CAAC,CAAC;SAEZ;;;WARC,SAAS;;;AAYf,QAAQ,CAAC,eAAe,EAAE,UAAS,IAAI,EAAE;;AAErC,cAAU,CAAC,YAAW;;AAElB,cAAM,GAAG;AACL,kBAAM,EAAE,KAAK;AACb,qBAAS,EAAE,KAAK;AAChB,uBAAW,EAAE,uBAAW;AACpB,oBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACtB;AACD,kCAAsB,EAAA,gCAAC,GAAG,EAAC;AAC3B,oBAAI,CAAC,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC;aAChC;AACG,yBAAa,EAAE,yBAAU;AACrB,oBAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACzB;SACJ,CAAC;KAEL,CAAC,CAAC;;AAEH,MAAE,CAAC,oCAAoC,EAAE,UAAU,IAAI,EAAE;;AAErD,YAAI,GAAG,IAAI,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAC,IAAI,CAAC,CAAC,CAAC;;AAE/C,kBAAU,CAAC,YAAW;AACjB,mCAAK,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,SAAM,EAAE,CAAC;SACtC,EAAE,IAAI,CAAC,CAAC;;AAET,kBAAU,CAAC,YAAW;AAClB,mCAAK,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;AACxC,gBAAI,EAAE,CAAC;SACV,EAAE,IAAI,CAAC,CAAC;;AAET,YAAI,CAAC,GAAG,CAAC,MAAM,EAAE,YAAU;AACvB,gBAAI,EAAE,CAAC;SACV,CAAC,CAAC;KAEN,CAAC,CAAC;;AAEH,MAAE,CAAC,sDAAsD,EAAE,UAAU,IAAI,EAAE;;AAEvE,YAAI,GAAG,IAAI,SAAS,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAC,IAAI,CAAC,CAAC,CAAC;;AAEhD,kBAAU,CAAC,YAAW;AAClB,mCAAK,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,SAAM,EAAE,CAAC;SACrC,EAAE,IAAI,CAAC,CAAC;;AAET,kBAAU,CAAC,YAAW;AAClB,mCAAK,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,QAAK,EAAE,CAAC;AACjC,gBAAI,EAAE,CAAC;SACV,EAAE,IAAI,CAAC,CAAC;;AAET,YAAI,CAAC,GAAG,CAAC,MAAM,EAAE,YAAU;AACvB,gBAAI,EAAE,CAAC;SACV,CAAC,CAAC;KAEN,CAAC,CAAC;CAEN,CAAC,CAAC","file":"ScheduledTask_test.js","sourcesContent":["import ScheduledTask from '../ScheduledTask';\nimport must from 'must';\n\nvar report;\nvar task;\n\nclass SomeTask extends ScheduledTask {\n\n    runTask(report, cb){\n\n        setTimeout(cb, 1000);\n\n    }\n\n}\n\nclass ErrorTask extends ScheduledTask {\n\n    runTask(report, cb){\n\n        setTimeout(function() {\n            cb(new Error('Some error'));\n        }, 1000);\n\n    }\n\n}\n\ndescribe('ScheduledTask', function(done) {\n\n    beforeEach(function() {\n\n        report = {\n            called: false,\n            completed: false,\n            taskStarted: function() {\n                this.called = true;\n            },\n            taskCompletedWithError(err){\n            this.completed = err.message;\n        },\n            taskCompleted: function(){\n                this.completed = true;\n            }\n        };\n\n    });\n\n    it('should run task at specified time ', function (done) {\n\n        task = new SomeTask(new Date(Date.now()+6000));\n\n        setTimeout(function() {\n             must(report.completed).be.false();\n        }, 5000);\n\n        setTimeout(function() {\n            must(report.completed).be('Some Error');\n            done();\n        }, 7000);\n\n        task.run(report, function(){\n            done();\n        });\n\n    });\n\n    it('should run task at specified time and report errors ', function (done) {\n\n        task = new ErrorTask(new Date(Date.now()+6000));\n\n        setTimeout(function() {\n            must(report.completed).be.false();\n        }, 5000);\n\n        setTimeout(function() {\n            must(report.completed).be.true();\n            done();\n        }, 7000);\n\n        task.run(report, function(){\n            done();\n        });\n\n    });\n\n});"]}