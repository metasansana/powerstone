{"version":3,"sources":["../../src/test/Project_test.js"],"names":[],"mappings":"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","file":"Project_test.js","sourcesContent":["import must from 'must';\nimport Project from '../Project';\n\nvar project;\nvar loader;\nvar Connections;\nvar config;\nvar $config;\n\ndescribe('Project', function () {\n\n    beforeEach(function () {\n\n        config = {\n            readWithDefaults(key, defaults) {\n                if($config[key])\n                return $config[key];\n                return defaults;\n            }\n        };\n\n        loader = {\n\n            loadFromConf(file) {\n\n                if(file === 'config')\n                return {\n\n                };\n\n            }\n\n        };\n\n    });\n\n    describe('Project#isMain', function () {\n\n        it('should return true with no prefix', function () {\n           project =  new Project(null, config, loader);\n            must(project.isMain()).eql(true);\n        });\n\n        it('should return false with a prefix', function () {\n            project = new Project('apps', config, loader);\n            must(project.isMain()).eql(false);\n        });\n\n    });\n\n    describe('Project#setConnections', function () {\n\n        beforeEach(function () {\n\n            Connections = {\n                create(name, type, factory) {\n                    this.open = {name:name, type:type, factory:factory};\n                }\n            };\n\n            $config = {\n                connections: {\n                    type:'test',\n                    name:'test-connection',\n                    options:[1,2,3]\n                }\n            };\n\n            project = new Project(null, config, loader);\n            project.setConnections(Connections);\n            must(Connections.open).eql({name:'test-connection', type:'test', options:[1,2,3]});\n\n        });\n\n    });\n\n    describe('Project#getSubProjects', function() {\n\n        it('should create new projects from the projects field', function () {\n\n            $config = {\n                projects: [__dirname+'/project_test/app1',\n                    __dirname+'/project_test/app2',\n                    __dirname+'/project_test/app3']\n            };\n\n            project = new Project(null, config, loader);\n            var projects = project.getSubProjects();\n            must(projects.length).be(3);\n            projects.forEach(project=>must(project).instanceOf(Project));\n\n\n\n\n        });\n\n    });\n\n});\n"]}