import restify from 'restify';

class ServerFactory {

    create(main) {

        var s = restify.createServer(main.configuration.readOrDefault('api.options', null));

        s.on('uncaughtException', (req, res, route, err) => {
            res.status(500);
            res.send();
            events.emit('error', err);
        });

        return s;
    }

}

export default new ServerFactory();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcGkvU2VydmVyRmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJyZXN0aWZ5IiwiU2VydmVyRmFjdG9yeSIsImNyZWF0ZSIsIm1haW4iLCJzIiwiY3JlYXRlU2VydmVyIiwiY29uZmlndXJhdGlvbiIsInJlYWRPckRlZmF1bHQiLCJvbiIsInJlcSIsInJlcyIsInJvdXRlIiwiZXJyIiwic3RhdHVzIiwic2VuZCIsImV2ZW50cyIsImVtaXQiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLE9BQVAsTUFBb0IsU0FBcEI7O0FBRUEsTUFBTUMsYUFBTixDQUFvQjs7QUFFakJDLFdBQU9DLElBQVAsRUFBYTs7QUFFUixZQUFJQyxJQUFJSixRQUFRSyxZQUFSLENBQXFCRixLQUFLRyxhQUFMLENBQW1CQyxhQUFuQixDQUFpQyxhQUFqQyxFQUFnRCxJQUFoRCxDQUFyQixDQUFSOztBQUVBSCxVQUFFSSxFQUFGLENBQUssbUJBQUwsRUFBMEIsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLEtBQVgsRUFBa0JDLEdBQWxCLEtBQTBCO0FBQ2hERixnQkFBSUcsTUFBSixDQUFXLEdBQVg7QUFDQUgsZ0JBQUlJLElBQUo7QUFDQUMsbUJBQU9DLElBQVAsQ0FBWSxPQUFaLEVBQXFCSixHQUFyQjtBQUNILFNBSkQ7O0FBTUEsZUFBT1IsQ0FBUDtBQUNIOztBQWJlOztBQWlCcEIsZUFBZSxJQUFJSCxhQUFKLEVBQWYiLCJmaWxlIjoiU2VydmVyRmFjdG9yeS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZXN0aWZ5IGZyb20gJ3Jlc3RpZnknO1xuXG5jbGFzcyBTZXJ2ZXJGYWN0b3J5IHtcblxuICAgY3JlYXRlKG1haW4pIHtcblxuICAgICAgICB2YXIgcyA9IHJlc3RpZnkuY3JlYXRlU2VydmVyKG1haW4uY29uZmlndXJhdGlvbi5yZWFkT3JEZWZhdWx0KCdhcGkub3B0aW9ucycsIG51bGwpKTtcblxuICAgICAgICBzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChyZXEsIHJlcywgcm91dGUsIGVycikgPT4ge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApO1xuICAgICAgICAgICAgcmVzLnNlbmQoKTtcbiAgICAgICAgICAgIGV2ZW50cy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgU2VydmVyRmFjdG9yeSgpO1xuIl19