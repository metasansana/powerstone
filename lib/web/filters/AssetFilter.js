import express from 'express';
import serve_index from 'serve-index';
/**
 * AssetFilter 
 * @implements {Filter}
 */
class AssetFilter {

    apply(app, config) {
        //TODO consider checking if the paths exists first
        config.read(config.keys.FILTERS_ASSET_PATHS, [config.paths.public]).forEach(path => app.use(express.static(path, config.read(config.keys.FILTERS_ASSET_PATH_OPTIONS, null))));

        config.read(config.keys.FILTERS.ASSET_DIRECTORY, []).forEach(path => app.use(serve_index(path, config.read(config.keys.FILTERS_ASSET_DIRECTORY_OPTIONS, null))));
    }

}

export default new AssetFilter();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy93ZWIvZmlsdGVycy9Bc3NldEZpbHRlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwic2VydmVfaW5kZXgiLCJBc3NldEZpbHRlciIsImFwcGx5IiwiYXBwIiwiY29uZmlnIiwicmVhZCIsImtleXMiLCJGSUxURVJTX0FTU0VUX1BBVEhTIiwicGF0aHMiLCJwdWJsaWMiLCJmb3JFYWNoIiwicGF0aCIsInVzZSIsInN0YXRpYyIsIkZJTFRFUlNfQVNTRVRfUEFUSF9PUFRJT05TIiwiRklMVEVSUyIsIkFTU0VUX0RJUkVDVE9SWSIsIkZJTFRFUlNfQVNTRVRfRElSRUNUT1JZX09QVElPTlMiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLE9BQVAsTUFBb0IsU0FBcEI7QUFDQSxPQUFPQyxXQUFQLE1BQXdCLGFBQXhCO0FBQ0E7Ozs7QUFJQSxNQUFNQyxXQUFOLENBQWtCOztBQUVkQyxVQUFNQyxHQUFOLEVBQVdDLE1BQVgsRUFBbUI7QUFDdkI7QUFDUUEsZUFBT0MsSUFBUCxDQUFZRCxPQUFPRSxJQUFQLENBQVlDLG1CQUF4QixFQUE2QyxDQUFDSCxPQUFPSSxLQUFQLENBQWFDLE1BQWQsQ0FBN0MsRUFDQUMsT0FEQSxDQUNRQyxRQUFRUixJQUFJUyxHQUFKLENBQVFiLFFBQVFjLE1BQVIsQ0FBZUYsSUFBZixFQUNwQlAsT0FBT0MsSUFBUCxDQUFZRCxPQUFPRSxJQUFQLENBQVlRLDBCQUF4QixFQUFvRCxJQUFwRCxDQURvQixDQUFSLENBRGhCOztBQUlBVixlQUFPQyxJQUFQLENBQVlELE9BQU9FLElBQVAsQ0FBWVMsT0FBWixDQUFvQkMsZUFBaEMsRUFBaUQsRUFBakQsRUFDRU4sT0FERixDQUNVQyxRQUFRUixJQUFJUyxHQUFKLENBQVFaLFlBQVlXLElBQVosRUFDdEJQLE9BQU9DLElBQVAsQ0FBWUQsT0FBT0UsSUFBUCxDQUFZVywrQkFBeEIsRUFBeUQsSUFBekQsQ0FEc0IsQ0FBUixDQURsQjtBQUlIOztBQVphOztBQWdCbEIsZUFBZSxJQUFJaEIsV0FBSixFQUFmIiwiZmlsZSI6IkFzc2V0RmlsdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgc2VydmVfaW5kZXggZnJvbSAnc2VydmUtaW5kZXgnO1xuLyoqXG4gKiBBc3NldEZpbHRlciBcbiAqIEBpbXBsZW1lbnRzIHtGaWx0ZXJ9XG4gKi9cbmNsYXNzIEFzc2V0RmlsdGVyIHtcblxuICAgIGFwcGx5KGFwcCwgY29uZmlnKSB7XG4vL1RPRE8gY29uc2lkZXIgY2hlY2tpbmcgaWYgdGhlIHBhdGhzIGV4aXN0cyBmaXJzdFxuICAgICAgICBjb25maWcucmVhZChjb25maWcua2V5cy5GSUxURVJTX0FTU0VUX1BBVEhTLCBbY29uZmlnLnBhdGhzLnB1YmxpY10pLlxuICAgICAgICBmb3JFYWNoKHBhdGggPT4gYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLFxuICAgICAgICAgICAgY29uZmlnLnJlYWQoY29uZmlnLmtleXMuRklMVEVSU19BU1NFVF9QQVRIX09QVElPTlMsIG51bGwpKSkpO1xuXG4gICAgICAgIGNvbmZpZy5yZWFkKGNvbmZpZy5rZXlzLkZJTFRFUlMuQVNTRVRfRElSRUNUT1JZLCBbXSkuXG4gICAgICAgICAgZm9yRWFjaChwYXRoID0+IGFwcC51c2Uoc2VydmVfaW5kZXgocGF0aCxcbiAgICAgICAgICAgIGNvbmZpZy5yZWFkKGNvbmZpZy5rZXlzLkZJTFRFUlNfQVNTRVRfRElSRUNUT1JZX09QVElPTlMsIG51bGwpKSkpO1xuXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBBc3NldEZpbHRlcigpXG4iXX0=