import parser from 'body-parser';

/**
 * ParserFilter 
 * @implements {Filter}
 * TODO multipart/form-data support
 */
class ParserFilter {

    apply(app, config) {

        if (config.read(config.keys.FILTERS_PARSER_JSON_ENABLED, true)) app.use(parser.json(config.keys.FILTERS_PARSER_JSON_OPTIONS, null));

        if (config.read(config.keys.FILTERS_PARSER_URLENCODED_ENABLED, true)) app.use(parser.urlencoded(config.read(config.keys.FILTERS_PARSER_URLENCODED_OPTIONS, {
            extended: true
        })));

        if (config.read(config.keys.FILTERS_PARSER_RAW_ENABLED, false)) app.use(parser.raw(config.keys.FILTERS_PARSER_RAW_OPTIONS, null));

        if (config.read(config.keys.FILTERS_PARSER_TEXT_ENABLED, false)) app.use(parser.text(config.keys.FILTERS_PARSER_TEXT_OPTIONS, null));
    }

}

export default new ParserFilter();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy93ZWIvZmlsdGVycy9QYXJzZXJGaWx0ZXIuanMiXSwibmFtZXMiOlsicGFyc2VyIiwiUGFyc2VyRmlsdGVyIiwiYXBwbHkiLCJhcHAiLCJjb25maWciLCJyZWFkIiwia2V5cyIsIkZJTFRFUlNfUEFSU0VSX0pTT05fRU5BQkxFRCIsInVzZSIsImpzb24iLCJGSUxURVJTX1BBUlNFUl9KU09OX09QVElPTlMiLCJGSUxURVJTX1BBUlNFUl9VUkxFTkNPREVEX0VOQUJMRUQiLCJ1cmxlbmNvZGVkIiwiRklMVEVSU19QQVJTRVJfVVJMRU5DT0RFRF9PUFRJT05TIiwiZXh0ZW5kZWQiLCJGSUxURVJTX1BBUlNFUl9SQVdfRU5BQkxFRCIsInJhdyIsIkZJTFRFUlNfUEFSU0VSX1JBV19PUFRJT05TIiwiRklMVEVSU19QQVJTRVJfVEVYVF9FTkFCTEVEIiwidGV4dCIsIkZJTFRFUlNfUEFSU0VSX1RFWFRfT1BUSU9OUyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsTUFBUCxNQUFtQixhQUFuQjs7QUFFQTs7Ozs7QUFLQSxNQUFNQyxZQUFOLENBQW1COztBQUVmQyxVQUFNQyxHQUFOLEVBQVdDLE1BQVgsRUFBbUI7O0FBRWYsWUFBSUEsT0FBT0MsSUFBUCxDQUFZRCxPQUFPRSxJQUFQLENBQVlDLDJCQUF4QixFQUFxRCxJQUFyRCxDQUFKLEVBQ0lKLElBQUlLLEdBQUosQ0FBUVIsT0FBT1MsSUFBUCxDQUFZTCxPQUFPRSxJQUFQLENBQVlJLDJCQUF4QixFQUFxRCxJQUFyRCxDQUFSOztBQUVKLFlBQUlOLE9BQU9DLElBQVAsQ0FBWUQsT0FBT0UsSUFBUCxDQUFZSyxpQ0FBeEIsRUFBMkQsSUFBM0QsQ0FBSixFQUNJUixJQUFJSyxHQUFKLENBQVFSLE9BQU9ZLFVBQVAsQ0FBa0JSLE9BQU9DLElBQVAsQ0FBWUQsT0FBT0UsSUFBUCxDQUFZTyxpQ0FBeEIsRUFBMkQ7QUFDakZDLHNCQUFVO0FBRHVFLFNBQTNELENBQWxCLENBQVI7O0FBSUosWUFBSVYsT0FBT0MsSUFBUCxDQUFZRCxPQUFPRSxJQUFQLENBQVlTLDBCQUF4QixFQUFvRCxLQUFwRCxDQUFKLEVBQ0laLElBQUlLLEdBQUosQ0FBUVIsT0FBT2dCLEdBQVAsQ0FBV1osT0FBT0UsSUFBUCxDQUFZVywwQkFBdkIsRUFBbUQsSUFBbkQsQ0FBUjs7QUFFSixZQUFJYixPQUFPQyxJQUFQLENBQVlELE9BQU9FLElBQVAsQ0FBWVksMkJBQXhCLEVBQXFELEtBQXJELENBQUosRUFDSWYsSUFBSUssR0FBSixDQUFRUixPQUFPbUIsSUFBUCxDQUFZZixPQUFPRSxJQUFQLENBQVljLDJCQUF4QixFQUFxRCxJQUFyRCxDQUFSO0FBSVA7O0FBcEJjOztBQXdCbkIsZUFBZSxJQUFJbkIsWUFBSixFQUFmIiwiZmlsZSI6IlBhcnNlckZpbHRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuXG4vKipcbiAqIFBhcnNlckZpbHRlciBcbiAqIEBpbXBsZW1lbnRzIHtGaWx0ZXJ9XG4gKiBUT0RPIG11bHRpcGFydC9mb3JtLWRhdGEgc3VwcG9ydFxuICovXG5jbGFzcyBQYXJzZXJGaWx0ZXIge1xuXG4gICAgYXBwbHkoYXBwLCBjb25maWcpIHtcblxuICAgICAgICBpZiAoY29uZmlnLnJlYWQoY29uZmlnLmtleXMuRklMVEVSU19QQVJTRVJfSlNPTl9FTkFCTEVELCB0cnVlKSlcbiAgICAgICAgICAgIGFwcC51c2UocGFyc2VyLmpzb24oY29uZmlnLmtleXMuRklMVEVSU19QQVJTRVJfSlNPTl9PUFRJT05TLCBudWxsKSlcblxuICAgICAgICBpZiAoY29uZmlnLnJlYWQoY29uZmlnLmtleXMuRklMVEVSU19QQVJTRVJfVVJMRU5DT0RFRF9FTkFCTEVELCB0cnVlKSlcbiAgICAgICAgICAgIGFwcC51c2UocGFyc2VyLnVybGVuY29kZWQoY29uZmlnLnJlYWQoY29uZmlnLmtleXMuRklMVEVSU19QQVJTRVJfVVJMRU5DT0RFRF9PUFRJT05TLCB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kZWQ6IHRydWVcbiAgICAgICAgICAgIH0pKSlcblxuICAgICAgICBpZiAoY29uZmlnLnJlYWQoY29uZmlnLmtleXMuRklMVEVSU19QQVJTRVJfUkFXX0VOQUJMRUQsIGZhbHNlKSlcbiAgICAgICAgICAgIGFwcC51c2UocGFyc2VyLnJhdyhjb25maWcua2V5cy5GSUxURVJTX1BBUlNFUl9SQVdfT1BUSU9OUywgbnVsbCkpXG5cbiAgICAgICAgaWYgKGNvbmZpZy5yZWFkKGNvbmZpZy5rZXlzLkZJTFRFUlNfUEFSU0VSX1RFWFRfRU5BQkxFRCwgZmFsc2UpKVxuICAgICAgICAgICAgYXBwLnVzZShwYXJzZXIudGV4dChjb25maWcua2V5cy5GSUxURVJTX1BBUlNFUl9URVhUX09QVElPTlMsIG51bGwpKVxuXG5cblxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUGFyc2VyRmlsdGVyKClcbiJdfQ==