{"version":3,"sources":["../../src/api/Api.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;wBAAoB,UAAU;;;;uBACV,SAAS;;;;yBACN,WAAW;;;;iCACV,uBAAuB;;;;yBACzB,aAAa;;;;mCACT,yBAAyB;;;;6BAC5B,mBAAmB;;;;AAE1C,SAAS,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;;AAE1C,WAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzB,OAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAChB,OAAG,CAAC,GAAG,EAAE,CAAC;CAEb;;IAEK,GAAG;cAAH,GAAG;;AAEM,aAFT,GAAG,CAEO,IAAI,EAAE;8BAFhB,GAAG;;AAID,mCAJF,GAAG,6CAIK,IAAI,EAAE;;AAEZ,YAAI,CAAC,IAAI,GAAG,2BAAc,EAAE,EAAE,qCAAkB,SAAS,EAAE,IAAI,CAAC,EAC5D,gCAAgB,EAAE,IAAI,CAAC,CAAC;;AAE5B,YAAI,CAAC,YAAY,GAAG,qBAAQ,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;AACxF,YAAI,CAAC,YAAY,CAAC,EAAE,CAAC,mBAAmB,EAAE,eAAe,CAAC,CAAC;KAE9D;;iBAZC,GAAG;;eAcS,0BAAG;;AAEb,mBAAO,IAAI,CAAC,YAAY,CAAC;SAE5B;;;WAlBC,GAAG;;;qBAuBM,GAAG","file":"Api.js","sourcesContent":["import Promise from 'bluebird';\nimport restify from 'restify';\nimport deep_merge from 'deepmerge';\nimport Application from '../common/Application';\nimport ApiModule from './ApiModule';\nimport Configuration from '../common/Configuration';\nimport ApiContext from '../api/ApiContext';\n\nfunction handleException(req, res, next, err) {\n\n    console.error(err.stack);\n    res.status(500);\n    res.end();\n\n}\n\nclass Api extends Application {\n\n    constructor(path) {\n\n        super(path);\n\n        this.main = new ApiModule('', new Configuration('apiconf', path),\n            new ApiContext(), this);\n\n        this.frameworkApp = restify.createServer(this.main.configuration.read('restify', null));\n        this.frameworkApp.on('uncaughtException', handleException);\n\n    }\n\n    __createServer() {\n\n        return this.frameworkApp;\n\n    }\n\n\n}\n\nexport default Api\n"]}