{"version":3,"sources":["../../src/api/ApiModule.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;mCAA0B,yBAAyB;;;;4BAChC,kBAAkB;;;;;;;;;;;;;IAU/B,SAAS;cAAT,SAAS;;aAAT,SAAS;8BAAT,SAAS;;mCAAT,SAAS;;;iBAAT,SAAS;;eAEA,qBAAC,QAAQ,EAAE,GAAG,EAAE;;AAEvB,mBAAO,IAAI,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAClC,qCAAkB,SAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAEvE;;;eAEU,uBAAG,EAGb;;;eAEQ,mBAAC,KAAK,EAAE,MAAM,EAAE;;;AAErB,gBAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,iCAAc,IAAI,CAAC,IAAI,QAAM,IAAI,CAAC,IAAI,CAAG,CAAC;AACtF,gBAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,iCAAc,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAC7E,gBAAI,QAAQ,GAAM,KAAK,SAAI,IAAI,AAAE,CAAC;AAClC,gBAAI,MAAM,CAAC;;AAEX,kBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CACnB,OAAO,CAAC,UAAA,IAAI,EAAI;;AAEZ,sBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CACzB,GAAG,CAAC,UAAA,MAAM,EAAI;;AAEV,2BAAO,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC5E,2BAAO,CAAC,KAAK,CAAC,MAAK,QAAQ,CAAC,CAAC;iBAEhC,CAAC,CAAC;aAEN,CAAC,CAAC;;AAEH,gBAAI,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAClD,kBAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAElC;;;WArCC,SAAS;;;qBA0CA,SAAS","file":"ApiModule.js","sourcesContent":["import Configuration from '../common/Configuration';\nimport Module from '../common/Module';\n\n/**\n * Module\n * @param {string} fqn The name of the module prefixed with its parent modules \n * @param {string} path \n * @param {Configuration} config \n * @param {Loader} loader \n * @param {Application} app \n */\nclass ApiModule extends Module {\n\n    __submodule(resource, app) {\n\n        return new ApiModule(resource.basename, \n            new Configuration('apiconf', resource.path), this.context, app);\n\n    }\n\n    __framework() {\n\n\n    }\n\n    __routing(point, parent) {\n\n        var path = this.configuration.readOrDefault(Configuration.keys.PATH, `/${this.name}`);\n        var routes = this.configuration.readOrDefault(Configuration.keys.ROUTES, {});\n        var location = `${point}/${path}`;\n        var action;\n\n        Object.keys(routes).\n        forEach(path => {\n\n            Object.keys(routes[path]).\n            map(method => {\n\n                actions = new Actions(method, path, Delegates.create(routes[path][method]));\n                actions.apply(this._handler);\n\n            });\n\n        });\n\n        this.submodules.__routing(location, this.handler);\n        parent.use(path, this.handler);\n\n    }\n\n\n}\n\nexport default ApiModule\n"]}