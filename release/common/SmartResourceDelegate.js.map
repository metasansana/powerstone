{"version":3,"sources":["../../src/common/SmartResourceDelegate.js"],"names":[],"mappings":";;;;;;;;;;;;oCAAiC,wBAAwB;;;;;;;;;;;;;;;;;;;;IAiBnD,qBAAqB;AAEZ,aAFT,qBAAqB,CAEX,QAAQ,EAAE;8BAFpB,qBAAqB;;AAInB,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,YAAI,CAAC,UAAU,GAAG,EAAE,CAAC;KAExB;;;;;;;;iBAPC,qBAAqB;;eAcpB,aAAC,IAAI,EAAE,QAAQ,EAAE;;AAEhB,gBAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;AACjC,mBAAO,IAAI,CAAC;SAEf;;;eAEM,iBAAC,IAAI,EAAE;;AAEV,gBAAI,CAAC,IAAI,EAAE,MAAM,IAAI,SAAS,CAAC,gDAAgD,CAAC,CAAC;;AAEjF,gBAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AAC9B,gBAAI,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACtB,gBAAI,QAAQ,GAAG,IAAI,CAAC;;AAGpB,gBAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AACpB,wBAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzB,oBAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;aACnB,MAAM;AACH,wBAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AACnC,qBAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;aACpB;;AAED,gBAAI,CAAC,QAAQ,EACT,MAAM,sCAAyB,MAAM,EAAE,IAAI,CAAC,CAAC;;AAEjD,mBAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAGjC;;;eAEK,gBAAC,IAAI,EAAE;;AAET,gBAAI,CAAC,IAAI,EACP,MAAM,IAAI,SAAS,CAAC,0DAA0D,CAAC,CAAC;;AAElF,gBAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AAC9B,gBAAI,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACtB,gBAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,gBAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AACpB,wBAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzB,oBAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;aACnB,MAAM;AACH,wBAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AACnC,qBAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;aACpB;;AAED,gBAAI,CAAC,QAAQ,EACT,MAAM,sCAAyB,MAAM,EAAE,IAAI,CAAC,CAAC;;AAEjD,mBAAO,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAEhC;;;WApEC,qBAAqB;;;qBAwEZ,qBAAqB","file":"SmartResourceDelegate.js","sourcesContent":["import UnknownResourceError from './UnknownResourceError';\n\n/**\n * SmartResourceDelegate provides an api that lets client code determine which\n * ResourceDelegate to invoke to locate a piece of code we want to utilize.\n *\n * It works by utilizing a URL like string where the scheme tells us what \n * delegate to use.\n * Example:\n * ```javascript\n *  \n *   'require://path-to-file-to-require'\n *\n * ```\n * @param {ResourceDelegate} delegate The default ResourceDelegate to use if nothing else matches.\n * @implements {ResourceDelegate}\n */\nclass SmartResourceDelegate {\n\n    constructor(delegate) {\n\n        this._default = delegate;\n        this._delegates = {};\n\n    }\n\n    /**\n     * add a delegate to the internal list\n     * @param {string} name \n     * @param {ResourceDelegate} delegate\n     */\n    add(name, delegate) {\n\n        this._delegates[name] = delegate;\n        return this;\n\n    }\n\n    resolve(path) {\n\n        if (!path) throw new TypeError('Value supplied for resource string is invalid!');\n\n        var parts = path.split('://');\n        var scheme = parts[0];\n        var delegate = null;\n\n\n        if (parts.length === 1) {\n            delegate = this._default;\n            path = parts[0];\n        } else {\n            delegate = this._delegates[scheme];\n            parth = parts[1];\n        }\n\n        if (!delegate)\n            throw new UnknownResourceError(scheme, path);\n\n        return delegate.resolve(path);\n\n\n    }\n\n    lookup(path) {\n\n        if (!path) \n          throw new TypeError('Value supplied for resource string is invalid or empty\u001c!');\n\n        var parts = path.split('://');\n        var scheme = parts[0];\n        var delegate = null;\n\n        if (parts.length === 1) {\n            delegate = this._default;\n            path = parts[0];\n        } else {\n            delegate = this._delegates[scheme];\n            parth = parts[1];\n        }\n\n        if (!delegate)\n            throw new UnknownResourceError(scheme, path);\n\n        return delegate.lookup(path);\n\n    }\n\n}\n\nexport default SmartResourceDelegate\n"]}