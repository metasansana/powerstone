{"version":3,"sources":["../../../src/common/route/MiddlewareAction.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;2BAAuB,eAAe;;;;IAEhC,sBAAsB;cAAtB,sBAAsB;;AACb,aADT,sBAAsB,CACZ,IAAI,EAAE;8BADhB,sBAAsB;;AAEpB,mCAFF,sBAAsB,2FAE8B,IAAI,QAAK;AAC3D,aAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;KACnD;;;;;;;WAJC,sBAAsB;;;IAYtB,gBAAgB;AAEP,aAFT,gBAAgB,CAEN,SAAS,EAAE;8BAFrB,gBAAgB;;AAId,YAAI,CAAC,UAAU,GAAG,SAAS,CAAC;KAE/B;;iBANC,gBAAgB;;eAQV,kBAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE;;;AAE1B,gBAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAC/B,OAAO,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,UAAA,UAAU,EAAI;;AAEtC,oBAAI,OAAO,UAAU,KAAK,UAAU,EAChC,OAAO,UAAU,CAAC;;AAEtB,oBAAI,MAAM,GAAG,MAAK,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;AAE9C,oBAAI,CAAC,MAAM,EACP,MAAM,IAAI,sBAAsB,CAAC,UAAU,CAAC,CAAC;;AAEjD,uBAAO,MAAM,CAAC;aAEjB,CAAC,CAAC;SAEV;;;WAzBC,gBAAgB;;;qBA4BP,gBAAgB","file":"MiddlewareAction.js","sourcesContent":["import PowerError from '../PowerError';\n\nclass UnknownMiddlewareError extends PowerError {\n    constructor(ware) {\n        super(`Unable to locate middleware specified as ${ware}!`);\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n\n/**\n * MiddlewareAction configures middleware specified by the 'middlewares'\n * key in a route declaration.\n * @implements {Action}\n */\nclass MiddlewareAction {\n\n    constructor(resources) {\n\n        this._resources = resources;\n\n    }\n\n    generate(method, path, route) {\n\n        if (Array.isArray(route.middleware))\n            return route.middleware.map(middleware => {\n\n                if (typeof middleware === 'function')\n                    return middleware;\n\n                var module = this._resources.find(middleware);\n\n                if (!module)\n                    throw new UnknownMiddlewareError(middleware);\n\n                return module;\n\n            });\n\n    }\n}\n\nexport default MiddlewareAction\n"]}