{"version":3,"sources":["../../src/route/ActionFeature.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;wBAAoB,WAAW;;;;AAE/B,SAAS,aAAa,CAAC,MAAM,EAAE;;AAE3B,QAAI,KAAK,CAAC;AACV,QAAI,UAAU,CAAC;AACf,QAAI,IAAI,CAAC;AACT,QAAI,IAAI,CAAC;AACT,QAAI,OAAO,GAAG,SAAV,OAAO,CAAY,GAAG,EAAE;;AAExB,WAAG,GAAG,GAAG,IAAI,EAAE,CAAC;;AAEhB,YAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EACrB,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EACrB,OAAO,IAAI,CAAC;KACvB,CAAA;;AAED,QAAI,OAAO,CAAC,MAAM,CAAC,EAAE;AACjB,aAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACvC,cAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;KACxB,MAAM;AACH,aAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC7B;;AAED,QAAI,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACvB,cAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC7C,QAAI,GAAI,OAAO,UAAU,AAAC,CAAC;;AAE3B,YAAQ,IAAI;;AAER,aAAK,UAAU;AACX,kBAAM;;AAAA,AAEV,aAAK,QAAQ;AACT,kBAAM;;AAAA,AAEV;AACI,kBAAM,IAAI,KAAK,CAAC,kBAAe,IAAI,6EACW,YACrC,IAAI,SAAI,CAAC,CAAC;;AAAA,KAG1B;CACJ;;;;;;IAKK,aAAa;cAAb,aAAa;;aAAb,aAAa;8BAAb,aAAa;;mCAAb,aAAa;;;iBAAb,aAAa;;eAER,iBAAC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE;;AAEjC,oBAAQ,OAAO,UAAU,CAAC,MAAM;;AAE5B,qBAAK,QAAQ;AACT,qBAAC,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC;AACvF,0BAAM;;AAAA,AAEV,qBAAK,UAAU;AACX,qBAAC,CAAC,KAAK,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;AACnC,0BAAM;;AAAA,AAEV,qBAAK,QAAQ;AACT,qBAAC,CAAC,KAAK,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;AACnE,0BAAM;;AAAA,AAEV;AACI,0BAAM;AAAA,aACb;SAEJ;;;WAtBC,aAAa;;;qBA0BJ,aAAa","file":"ActionFeature.js","sourcesContent":["import Feature from './Feature';\n\nfunction resolveAction(action) {\n\n    var split;\n    var Controller;\n    var path;\n    var type;\n    var is_call = function(str) {\n\n        str = str || '';\n\n        if (str.indexOf('(') > -1)\n            if (str.indexOf(')') > -1)\n                return true;\n    }\n\n    if (is_call(action)) {\n        split = action.slice(0, -2).split('.');\n        method = split.pop();\n    } else {\n        split = action.split('.');\n    }\n\n    path = split.join('.');\n    Controller = Property.get(controllers, path);\n    type = (typeof Controller);\n\n    switch (type) {\n\n        case 'function':\n            break;\n\n        case 'object':\n            break;\n\n        default:\n            throw new Error(`Controller '${path}' specified in route file ` +\n                `must be a constructor or an instance not` +\n                ` '${type}'!`);\n\n\n    }\n}\n\n/**\n * ActionFeature \n */\nclass ActionFeature extends Feature {\n\n    install(method, path, definition, q) {\n\n        switch (typeof definition.action) {\n\n            case 'string':\n                q.enque(method, this.application.resolveAction(definition.action, method, definition));\n                break;\n\n            case 'function':\n                q.enque(method, definition.action);\n                break;\n\n            case 'object':\n                q.enque(method, definition.action[method].bind(definition.action));\n                break;\n\n            default:\n                break;\n        }\n\n    }\n\n}\n\nexport default ActionFeature\n"]}