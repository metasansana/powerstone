{"version":3,"sources":["../../src/route/ControllerAction.js"],"names":[],"mappings":";;;;;;;;;;;;4BAAqB,eAAe;;;;;;AAIpC,SAAS,aAAa,CAAC,MAAM,EAAE,WAAW,EAAE;;AAExC,QAAI,KAAK,CAAC;AACV,QAAI,UAAU,CAAC;AACf,QAAI,IAAI,CAAC;AACT,QAAI,IAAI,CAAC;AACT,QAAI,MAAM,CAAC;AACX,QAAI,OAAO,GAAG,SAAV,OAAO,CAAY,GAAG,EAAE;;AAExB,WAAG,GAAG,GAAG,IAAI,EAAE,CAAC;;AAEhB,YAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EACrB,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EACrB,OAAO,IAAI,CAAC;KACvB,CAAA;;AAED,QAAI,OAAO,CAAC,MAAM,CAAC,EAAE;AACjB,aAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACvC,cAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;KACxB,MAAM;AACH,aAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC7B;;AAED,QAAI,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACvB,cAAU,GAAG,0BAAS,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;;AAE7C,WAAO,UAAU,GAAG,EAAE,GAAG,EAAE;AAC3B,AAAC,YAAI,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CAAE,MAAM,CAAC,EAAE,CAAC;KACpC,CAAA;AACD,WAAO,UAAU,CAAC;CACrB;;;;;;;IAMK,gBAAgB;AAEP,aAFT,gBAAgB,CAEN,WAAW,EAAE;8BAFvB,gBAAgB;;AAId,YAAI,CAAC,YAAY,GAAG,WAAW,CAAC;KAEnC;;iBANC,gBAAgB;;eAQV,kBAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE;;AAG1B,gBAAI,OAAO,KAAK,CAAC,MAAM,KAAK,QAAQ,EAChC,OAAO,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;;AAE1D,gBAAI,OAAO,KAAK,CAAC,MAAM,KAAK,UAAU,EAClC,OAAO,KAAK,CAAC,MAAM,CAAC;SAE3B;;;WAjBC,gBAAgB;;;qBAqBP,gBAAgB","file":"ControllerAction.js","sourcesContent":["import Property from 'property-seek';\n\n//TODO Someday we will parse the action string with arguments and all, until then,\n//bare with me.\nfunction resolveAction(action, controllers) {\n\n    var split;\n    var Controller;\n    var path;\n    var type;\n    var method;\n    var is_call = function(str) {\n\n        str = str || '';\n\n        if (str.indexOf('(') > -1)\n            if (str.indexOf(')') > -1)\n                return true;\n    }\n\n    if (is_call(action)) {\n        split = action.slice(0, -2).split('.');\n        method = split.pop();\n    } else {\n        split = action.split('.');\n    }\n\n    path = split.join('.');\n    Controller = Property.get(controllers, path);\n\n    return function (req, res) {\n    (new Controller(req, res))[method]();\n    }\n    return Controller;\n}\n\n/**\n * ControllerAction configures handlers for controllers.\n * @param {object} controllers A map of known controllers\n */\nclass ControllerAction {\n\n    constructor(controllers) {\n\n        this._controllers = controllers;\n\n    }\n\n    generate(method, path, route) {\n\n\n        if (typeof route.action === 'string')\n            return resolveAction(route.action, this._controllers);\n\n        if (typeof route.action === 'function')\n            return route.action;\n\n    }\n\n}\n\nexport default ControllerAction\n"]}